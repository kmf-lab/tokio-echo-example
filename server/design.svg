<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: EchoServer Pages: 1 -->
<svg width="1105pt" height="246pt"
 viewBox="0.00 0.00 1104.59 246.38" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 242.38)">
<title>EchoServer</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-242.38 1100.59,-242.38 1100.59,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_server</title>
<path fill="none" stroke="#b3b3b3" d="M337,-9.38C337,-9.38 821,-9.38 821,-9.38 827,-9.38 833,-15.38 833,-21.38 833,-21.38 833,-183.38 833,-183.38 833,-189.38 827,-195.38 821,-195.38 821,-195.38 337,-195.38 337,-195.38 331,-195.38 325,-189.38 325,-183.38 325,-183.38 325,-21.38 325,-21.38 325,-15.38 331,-9.38 337,-9.38"/>
<text text-anchor="middle" x="579" y="-180.18" font-family="Times,serif" font-size="14.00">Tokio Echo Server (Actor Model)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_channels</title>
<polygon fill="none" stroke="#cccccc" stroke-dasharray="5,2" points="8,-47.38 8,-230.38 185,-230.38 185,-47.38 8,-47.38"/>
<text text-anchor="middle" x="96.5" y="-215.18" font-family="Times,serif" font-size="14.00">Tokio mpsc Channels</text>
</g>
<!-- ConnectionService -->
<g id="node1" class="node">
<title>ConnectionService</title>
<path fill="lightblue" stroke="black" d="M466,-91.38C466,-91.38 345,-91.38 345,-91.38 339,-91.38 333,-85.38 333,-79.38 333,-79.38 333,-67.38 333,-67.38 333,-61.38 339,-55.38 345,-55.38 345,-55.38 466,-55.38 466,-55.38 472,-55.38 478,-61.38 478,-67.38 478,-67.38 478,-79.38 478,-79.38 478,-85.38 472,-91.38 466,-91.38"/>
<text text-anchor="middle" x="405.5" y="-76.38" font-family="Helvetica,sans-Serif" font-size="10.00">ConnectionService</text>
<text text-anchor="middle" x="405.5" y="-65.38" font-family="Helvetica,sans-Serif" font-size="10.00">(Accepts TCP connections)</text>
</g>
<!-- EchoService0 -->
<g id="node2" class="node">
<title>EchoService0</title>
<path fill="lightyellow" stroke="black" d="M813,-129.38C813,-129.38 694,-129.38 694,-129.38 688,-129.38 682,-123.38 682,-117.38 682,-117.38 682,-105.38 682,-105.38 682,-99.38 688,-93.38 694,-93.38 694,-93.38 813,-93.38 813,-93.38 819,-93.38 825,-99.38 825,-105.38 825,-105.38 825,-117.38 825,-117.38 825,-123.38 819,-129.38 813,-129.38"/>
<text text-anchor="middle" x="753.5" y="-114.38" font-family="Helvetica,sans-Serif" font-size="10.00">EchoService Worker 0</text>
<text text-anchor="middle" x="753.5" y="-103.38" font-family="Helvetica,sans-Serif" font-size="10.00">(Manages client sessions)</text>
</g>
<!-- ConnectionService&#45;&gt;EchoService0 -->
<g id="edge2" class="edge">
<title>ConnectionService&#45;&gt;EchoService0</title>
<path fill="none" stroke="blue" d="M478.24,-85.9C484.24,-86.8 490.22,-87.64 496,-88.38 554.6,-95.91 621.05,-101.79 671.63,-105.73"/>
<polygon fill="blue" stroke="blue" points="671.61,-109.23 681.85,-106.51 672.15,-102.25 671.61,-109.23"/>
<text text-anchor="middle" x="580" y="-108.18" font-family="Times,serif" font-size="14.00">Connection assignment</text>
</g>
<!-- EchoService1 -->
<g id="node3" class="node">
<title>EchoService1</title>
<path fill="lightyellow" stroke="black" d="M813,-73.38C813,-73.38 694,-73.38 694,-73.38 688,-73.38 682,-67.38 682,-61.38 682,-61.38 682,-49.38 682,-49.38 682,-43.38 688,-37.38 694,-37.38 694,-37.38 813,-37.38 813,-37.38 819,-37.38 825,-43.38 825,-49.38 825,-49.38 825,-61.38 825,-61.38 825,-67.38 819,-73.38 813,-73.38"/>
<text text-anchor="middle" x="753.5" y="-58.38" font-family="Helvetica,sans-Serif" font-size="10.00">EchoService Worker 1</text>
<text text-anchor="middle" x="753.5" y="-47.38" font-family="Helvetica,sans-Serif" font-size="10.00">(Manages client sessions)</text>
</g>
<!-- ConnectionService&#45;&gt;EchoService1 -->
<g id="edge3" class="edge">
<title>ConnectionService&#45;&gt;EchoService1</title>
<path fill="none" stroke="blue" d="M441.21,-55.3C457.4,-47.86 477.2,-40.11 496,-36.38 569.24,-21.84 589.75,-28.5 664,-36.38 666.53,-36.65 669.09,-36.96 671.68,-37.31"/>
<polygon fill="blue" stroke="blue" points="671.3,-40.79 681.71,-38.81 672.33,-33.87 671.3,-40.79"/>
<text text-anchor="middle" x="580" y="-40.18" font-family="Times,serif" font-size="14.00">Connection assignment</text>
</g>
<!-- EchoService0&#45;&gt;ConnectionService -->
<g id="edge6" class="edge">
<title>EchoService0&#45;&gt;ConnectionService</title>
<path fill="none" stroke="red" d="M681.93,-125.85C629.73,-133.88 557.37,-139.36 496,-123.38 475.94,-118.16 455.62,-107.34 439.42,-97.1"/>
<polygon fill="red" stroke="red" points="441.15,-94.06 430.87,-91.51 437.32,-99.92 441.15,-94.06"/>
<text text-anchor="middle" x="580" y="-137.18" font-family="Times,serif" font-size="14.00">LoadUpdate</text>
</g>
<!-- Client -->
<g id="node4" class="node">
<title>Client</title>
<ellipse fill="white" stroke="black" cx="1054.8" cy="-55.38" rx="41.59" ry="18"/>
<text text-anchor="middle" x="1054.8" y="-52.88" font-family="Helvetica,sans-Serif" font-size="10.00">TCP Clients</text>
</g>
<!-- EchoService0&#45;&gt;Client -->
<g id="edge4" class="edge">
<title>EchoService0&#45;&gt;Client</title>
<path fill="none" stroke="darkgreen" d="M825.05,-103.54C873.29,-97.45 938.48,-87.77 995,-74.38 1000.68,-73.04 1006.61,-71.4 1012.42,-69.66"/>
<polygon fill="darkgreen" stroke="darkgreen" points="1013.51,-72.99 1022.02,-66.68 1011.43,-66.31 1013.51,-72.99"/>
<text text-anchor="middle" x="919" y="-104.18" font-family="Times,serif" font-size="14.00">Echo: recv/send lines</text>
</g>
<!-- EchoService1&#45;&gt;ConnectionService -->
<g id="edge7" class="edge">
<title>EchoService1&#45;&gt;ConnectionService</title>
<path fill="none" stroke="red" d="M681.79,-59.06C625.63,-61.98 547.04,-66.07 488.2,-69.13"/>
<polygon fill="red" stroke="red" points="488,-65.64 478.19,-69.65 488.36,-72.63 488,-65.64"/>
<text text-anchor="middle" x="580" y="-73.18" font-family="Times,serif" font-size="14.00">LoadUpdate</text>
</g>
<!-- EchoService1&#45;&gt;Client -->
<g id="edge5" class="edge">
<title>EchoService1&#45;&gt;Client</title>
<path fill="none" stroke="darkgreen" d="M825.05,-55.38C879.58,-55.38 953.79,-55.38 1002.7,-55.38"/>
<polygon fill="darkgreen" stroke="darkgreen" points="1002.73,-58.88 1012.73,-55.38 1002.73,-51.88 1002.73,-58.88"/>
<text text-anchor="middle" x="919" y="-59.18" font-family="Times,serif" font-size="14.00">Echo: recv/send lines</text>
</g>
<!-- Client&#45;&gt;ConnectionService -->
<g id="edge1" class="edge">
<title>Client&#45;&gt;ConnectionService</title>
<path fill="none" stroke="black" d="M1019.28,-45.72C930.41,-22.5 687.32,30.63 496,-24.38 476.61,-29.96 456.75,-40.27 440.69,-50.01"/>
<polygon fill="black" stroke="black" points="438.81,-47.05 432.18,-55.32 442.52,-52.99 438.81,-47.05"/>
<text text-anchor="middle" x="753.5" y="-13.18" font-family="Times,serif" font-size="14.00">TCP connect</text>
</g>
<!-- worker_ch -->
<g id="node5" class="node">
<title>worker_ch</title>
<polygon fill="white" stroke="black" points="171,-199.38 16,-199.38 16,-163.38 177,-163.38 177,-193.38 171,-199.38"/>
<polyline fill="none" stroke="black" points="171,-199.38 171,-193.38 "/>
<polyline fill="none" stroke="black" points="177,-193.38 171,-193.38 "/>
<text text-anchor="middle" x="96.5" y="-184.38" font-family="Helvetica,sans-Serif" font-size="10.00">Connection &#45;&gt; Worker</text>
<text text-anchor="middle" x="96.5" y="-173.38" font-family="Helvetica,sans-Serif" font-size="10.00">(mpsc::Sender&lt;Connection&gt;)</text>
</g>
<!-- load_ch -->
<g id="node6" class="node">
<title>load_ch</title>
<polygon fill="white" stroke="black" points="170,-145.38 17,-145.38 17,-109.38 176,-109.38 176,-139.38 170,-145.38"/>
<polyline fill="none" stroke="black" points="170,-145.38 170,-139.38 "/>
<polyline fill="none" stroke="black" points="176,-139.38 170,-139.38 "/>
<text text-anchor="middle" x="96.5" y="-130.38" font-family="Helvetica,sans-Serif" font-size="10.00">LoadUpdate</text>
<text text-anchor="middle" x="96.5" y="-119.38" font-family="Helvetica,sans-Serif" font-size="10.00">Worker &#45;&gt; ConnectionService</text>
</g>
<!-- shutdown -->
<g id="node7" class="node">
<title>shutdown</title>
<polygon fill="white" stroke="black" points="137.5,-91.38 49.5,-91.38 49.5,-55.38 143.5,-55.38 143.5,-85.38 137.5,-91.38"/>
<polyline fill="none" stroke="black" points="137.5,-91.38 137.5,-85.38 "/>
<polyline fill="none" stroke="black" points="143.5,-85.38 137.5,-85.38 "/>
<text text-anchor="middle" x="96.5" y="-76.38" font-family="Helvetica,sans-Serif" font-size="10.00">oneshot::&lt;()&gt;</text>
<text text-anchor="middle" x="96.5" y="-65.38" font-family="Helvetica,sans-Serif" font-size="10.00">(Test shutdown)</text>
</g>
<!-- shutdown&#45;&gt;ConnectionService -->
<g id="edge8" class="edge">
<title>shutdown&#45;&gt;ConnectionService</title>
<path fill="none" stroke="purple" stroke-dasharray="5,2" d="M143.79,-73.38C191.12,-73.38 265.6,-73.38 322.86,-73.38"/>
<polygon fill="purple" stroke="purple" points="322.98,-76.88 332.98,-73.38 322.98,-69.88 322.98,-76.88"/>
<text text-anchor="middle" x="255" y="-77.18" font-family="Times,serif" font-size="14.00">Shutdown signal</text>
</g>
</g>
</svg>
